/*
 * ~/.config/waybar/style.css
 * Radically simplified color palette â€” Optimized & Organized
 */

/* --- IMPORT MATUGEN PALETTE --- */
@import url("../../.config/matugen/generated/waybar-colors.css");

/* 0. COLOR PALETTE BRIDGE */
@define-color foreground @on_surface;
@define-color accent @primary;
@define-color critical @error;

/*
 * ===================================================================
 * I. GLOBAL STYLES & LAYOUT
 * ===================================================================
 */

* {
    font-family: "JetBrainsMono Nerd Font Propo", "JetBrainsMono Nerd Font", "Noto Sans", sans-serif;
    font-size: 10px; 
    border: none;
    border-radius: 0;
    min-height: 0;
    animation: none;
    transition-property: color;
    transition-duration: 0.0s;
    transition-timing-function: ease-in-out;
}

window#waybar {
    background: alpha(@background, 0.85);
    color: @accent;
    margin: 1px;
    border-radius: 4px;
    padding: 5px 0;
}

window#waybar.hidden {
    opacity: 0.5;
}

tooltip {
    background: @background;
    color: @accent;
    border: 1px solid alpha(@accent, 0.2);
    border-radius: 6px;
}

tooltip label {
    padding: 8px;
    color: @accent;
}

/*
 * ===================================================================
 * II. MODULE-SPECIFIC STYLES
 * ===================================================================
 */

/* --- Shared Module Base --- */
#workspaces, #clock, box#bat, #bluetooth, box#audio, #custom-app-tray, 
box#cpu, box#memory, box#backlight, #tray, box#temp, #custom-notification, 
#custom-inhibit-suspend, #custom-power, #custom-theme,
box#network {
    padding-left: 0px;
    padding-right: 0px;
    margin: 4px 3px;
    padding-top: 0;
    padding-bottom: 0;
    border-radius: 6px;
    background-color: transparent;
}

/* --- Hover Effects --- */
#clock:hover, box#battery:hover, box#audio:hover, #bluetooth:hover, 
#custom-app-tray:hover, box#cpu:hover, box#memory:hover, box#backlight:hover, 
#custom-notification:hover, #custom-power:hover, box#temp:hover, 
#custom-inhibit-suspend:hover, #custom-theme:hover, box#network:hover {
    background-color: alpha(@accent, 0.2);
}

/* --- Workspaces --- */
#workspaces {
    background-color: alpha(@accent, 0.1);
}

#workspaces button {
    margin: 4px 3px;
    padding: 0;
    color: @foreground;
    background-color: transparent;
    border-radius: 6px;
}

#workspaces button:hover {
    background-color: alpha(@accent, 0.2);
}

#workspaces button.focused,
#workspaces button.active {
    background-color: @accent;
    color: @background;
}

#workspaces button.urgent {
    background-color: @critical;
    color: @background;
}

/* --- Text Colors & States --- */
#clock, box#bat, box#audio, #custom-app-tray, #bluetooth, 
box#temp, box#cpu, box#memory, box#backlight {
    color: @accent;
}

#clock {
    font-weight: bold;
    margin-top: 0px;
    margin-bottom: 0px;
}

/* Battery States */
label.battery-icon.warning { color: @critical; }
label.battery-icon.charging, label.battery-icon.plugged { color: @accent; }
label.battery-icon.critical:not(.charging) {
    color: @error_container;
    animation-name: blink-critical;
    animation-duration: 1.0s;
    animation-timing-function: steps(18);
    animation-iteration-count: infinite;
    animation-direction: alternate;
}

/* Audio States */
label.pulseaudio-icon.muted { color: @critical; }

/* Bluetooth States */
#bluetooth.disabled { color: @error; }
#bluetooth.connected { color: @accent; }

/* Temperature States */
label.temperature-icon.critical { color: @critical; }

/* Memory States */
label.memory-icon.critical { color: @critical; }

/* Inhibit Suspend States */
#custom-inhibit-suspend.enabled { color: @accent; }
#custom-inhibit-suspend.disabled { color: @critical; }

/* Custom Power */
#custom-power {
    color: @critical;
    margin-top: 0px;
}

/* Notifications */
#custom-notification.dnd-none { color: @accent; }
#custom-notification.dnd-notification,
#custom-notification.dnd-all { color: @critical; }
#custom-notification.notification {
    color: @accent;
    animation: blink-info 1s steps(1, end) infinite;
    margin-top: 2px;
    margin-bottom: 0px;
}

/* --- OPTIMIZED NETWORK STYLE --- */
#custom-network {
    /* Safe fix for tight vertical stacking without line-height crash */
    font-size: 9px; 
    color: @accent;
}

#custom-network.network-mb {
    color: @error;
}

/*
 * ===================================================================
 * III. ANIMATIONS
 * ===================================================================
 */
@keyframes blink-critical {
    to { background-color: transparent; color: @accent; }
}

@keyframes blink-urgent {
    to { background-color: @accent; color: @background; }
}

@keyframes blink-info {
    to { color: @accent; opacity: 0.5; }
}
